"use strict";function wfp_tab_control(e){var t=document.querySelectorAll(e);if(t)for(var r=0;r<t.length;r++)if(t[r]){t[r].setAttribute("wfp-forms-index",r),s(t[r]),a(t[r]);var i=t[r].querySelector(".wfp-preview");i&&(i.addEventListener("click",l),i.setAttribute("wfp-button-type","pre"),i.setAttribute("wfp-button-index",r));var n=t[r].querySelector(".wfp-next");n&&(n.addEventListener("click",l),n.setAttribute("wfp-button-type","next"),n.setAttribute("wfp-button-index",r))}function s(e){var t=e.querySelector(".wfp-tab-step-control"),r=e.getAttribute("wfp-forms-index");if(r||(r=0),t){var i=t.getAttribute("wfp-control");i||(i="yes");var n=t.querySelectorAll(".wfp-step");if(n)for(var s=0;s<n.length;s++)n[s]&&("yes"==i&&n[s].addEventListener("click",f),n[s].setAttribute("wfp-step-index",Number(r)+"-"+Number(s)))}}function a(e){var t=e.querySelector(".wfp-tabs-control"),r=e.getAttribute("wfp-forms-index");if(r||(r=0),t){var i=t.querySelectorAll(".wfp-tab");if(i)for(var n=0;n<i.length;n++)i[n]&&i[n].setAttribute("wfp-tab-index",Number(r)+"-"+Number(n))}}function f(e){e.preventDefault();var t=this.getAttribute("wfp-step-index");t||(t="0-0");var r=t.split("-"),i=Number(r[0]),n=(Number(r[1]),document.querySelector("[wfp-forms-index='"+i+"']"));if(!n)return!1;var s=n.querySelector(".wfp-step.active");if(!s)return!1;var a=s.getAttribute("wfp-step-index");if(a||(a="0-0"),!o(n,a))return!1;u(t)}function u(e){var t=e.split("-"),r=Number(t[0]),i=Number(t[1]),n=document.querySelector("[wfp-forms-index='"+r+"']");if(n){!function(e,t){var r=e.querySelector(".wfp-tab-step-control");if(r){var i=r.querySelectorAll(".wfp-step");if(i)for(var n=0;n<i.length;n++)i[n]&&(i[n].classList.remove("active"),i[n].classList.remove("finish"),n<t&&i[n].classList.add("finish"))}}(n,i),n.querySelector("[wfp-step-index='"+e+"']").classList.add("active"),function(e,t){var r=e.querySelector(".wfp-tabs-control");if(r){var i=r.querySelectorAll(".wfp-tab");if(i)for(var n=0;n<i.length;n++)i[n]&&(i[n].classList.remove("active"),i[n].classList.remove("finish"),n<t&&i[n].classList.add("finish"))}}(n,i),n.querySelector("[wfp-tab-index='"+e+"']").classList.add("active");var s=n.querySelector(".wfp-preview");s&&(0==i?s.classList.remove("open"):s.classList.add("open"));var a=n.querySelector(".wfp-next");if(a){var f,u=0,l=n.querySelectorAll(".wfp-tabs-control .wfp-tab");if(l&&(u=l.length),Number(i)+1==u){if(a.classList.add("finish"),f=a.getAttribute("wfp-finish-button")){var o=a.innerHTML,c=a.innerText,d=o.replace(c,f);a.innerHTML=d,a.getAttribute("wfp-next-button")||a.setAttribute("wfp-next-button",c)}}else if(a.classList.remove("finish"),f=a.getAttribute("wfp-finish-button")){o=a.innerHTML;var p=a.innerText;if((c=a.getAttribute("wfp-next-button"))&&p!=c){d=o.replace(f,c);a.innerHTML=d}}}}}function l(e){e.preventDefault();var t=this.getAttribute("wfp-button-index");t||(t=0);var r=this.getAttribute("wfp-button-type");r||(r="next");var i=document.querySelector("[wfp-forms-index='"+t+"']");if(i){var n=i.querySelector(".wfp-tab.active");if(!n)return!1;var s=n.getAttribute("wfp-tab-index");if(!s)return!1;if(!o(i,s))return!1;if("next"==r){if(jQuery(this).parents(".wfp-tabs-control").find(".switch-html").trigger("click"),f=n.nextElementSibling){if(!(l=f.getAttribute("wfp-tab-index"))){if(jQuery("#"+i.id)){(c=i.querySelector(".wfp-next"))&&(document.getElementsByTagName("body")[0].classList.add("wfp-disabled"),c.classList.add("disabled"),c.disabled=!0);var a=new FormData(jQuery("#"+i.id)[0]);jQuery.ajax({data:a,type:"POST",contentType:!1,processData:!1,url:window.xs_donate_url.resturl+"xs-fundraising-form/campaign-submit/"+t,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",xs_donate_url.nonce)},success:function(e){if(document.getElementsByTagName("body")[0].classList.remove("wfp-disabled"),i.querySelector("#wfp_update_post")||i.reset(),!(r=i.querySelector(".message-campaign-status"))){var t=document.createElement("div");t.setAttribute("class","message-campaign-status"),i.insertBefore(t,i.childNodes[0]);var r=i.querySelector(".message-campaign-status")}e.error.length>0?$(r).removeClass("xs-alert-success").addClass("xs-alert xs-alert-danger").html(e.error):e.success.length>0&&jQuery(r).removeClass("xs-alert-danger").addClass("xs-alert xs-alert-success").html(e.success)}})}return!0}}else l=t+"-0"}else{var f,l,c;if(f=n.previousElementSibling){if(!(l=f.getAttribute("wfp-tab-index")))return!1}else l=t+"-0";if(c=i.querySelector(".wfp-next")){var d=c.getAttribute("wfp-finish-button");if(d){var p=c.innerHTML,b=c.innerText,w=c.getAttribute("wfp-next-button");if(w&&b!=w){var v=p.replace(d,w);c.innerHTML=v}}}}u(l)}}function o(e,t){var r,i,n;if(!(n=e.querySelector("[wfp-tab-index='"+t+"']")))return!1;if(r=n.querySelectorAll(".wfp-require-filed"))for(i=0;i<r.length;i++){if(r[i].hasAttribute("required")){var s=Number(r[i].getAttribute("required"));if(s||(s=1),r[i].value.length<s)return r[i].classList.add("wfp-invalid"),!1}if(r[i].hasAttribute("wfp-pattern")){var a=r[i].getAttribute("wfp-pattern");if("email"==a){if(!wfp_email(r[i].value))return r[i].classList.add("wfp-invalid"),!1}else if("website"==a){if(!wfp_website(r[i].value))return r[i].classList.add("wfp-invalid"),!1}else if("phone"==a&&!wfp_phone(r[i].value))return r[i].classList.add("wfp-invalid"),!1}}return!0}}function wfp_email(e){return!!e.match(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/)}function wfp_website(e){return!!e.match(/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/)}function wfp_phone(e){return!!e.match(/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\./0-9]*$/g)}function wfp_modify_class(e){e.classList.remove("wfp-invalid")}