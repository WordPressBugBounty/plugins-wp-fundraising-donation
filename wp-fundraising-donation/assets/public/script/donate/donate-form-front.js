"use strict";function handle_add_to_cart_for_woocommerce_payment(e,t,a,r,o,n,i){n=n||window.xs_donate_url.resturl,o=o||window.xs_donate_url.nonce;let d={id:e,price:t,quantity:1,type:a};"reward"===a&&(d.pledge_id=r.pledge_id,d.pledge_uid=r.pledge_uid),jQuery.ajax({data:d,type:"post",url:n+"woc-redirect/add-to-cart/",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",o)},success:function(t){let a="#add_cart_"+e;document.querySelector(a).submit()}})}function handle_wfp_payment_gateway_redirect(e){setTimeout((function(){window.location.href=e}),1e3)}function is_woocommerce_payment(){return!0}function handle_disable_prop(e,t){e.disabled=t&&!0}function get_payment_type(e){return e.data("wfp-payment_type")||"default"}function xs_donate_amount_set(e,t,a){console.log(" trace -- 3");var r=document.querySelector("#wfdp-donationForm-"+t);if(r){var o=r.querySelector("#xs_donate_amount");if(o){var n=Number(e);0!=n?o.value=n.toFixed(a):(o.value="",o.focus());for(var i=r.querySelectorAll("ul.xs-boxed-style li, .wfp-bdage-list li"),d=0;d<i.length;d++){i[d].classList.remove("donate-active"),i[d].getAttribute("data-value")==e&&i[d].classList.add("donate-active")}}}}function xs_additional_fees(e,t){var a=document.querySelector("#wfdp-donationForm-"+t);if(console.log("trace -- 2"),a){var r=a.querySelector("#xs_donate_additional_fees_view");if(r){var o=Number(e),n=a.querySelector("#xs_donate_currency_thou_seperator").value,i=a.querySelector("#xs_donate_currency_decimal_seperator").value,d=a.querySelector("#xs_donate_currency_decimal_number").value,s=a.querySelector("#xs_donate_additional_fees_type").value,u=a.querySelector("#xs_donate_additional_fees").value;if("percentage"==s)var c=Number(o*Number(u)/100);else c=Number(u);var l=c.toFixed(d);l=(l=l.replace(/[#,]/g,""+n)).replace(/[#.]/g,""+i),r.innerHTML="<strong>"+l+"</strong>";var f=Number(o+c),p=a.querySelector("#xs_donate_amount_total_hidden");p&&(p.value=f);var _=a.querySelector("#xs_donate_amount_total");if(_){var m=f.toFixed(d);m=(m=m.replace(/[#,]/g,""+n)).replace(/[#.]/g,""+i),_.innerHTML="<strong>"+m+"</strong>"}}}}function xs_show_hide_donate_font(e){var t=document.querySelectorAll(e);if(t)for(var a=0;a<t.length;a++)t[a].classList.toggle("xs-donate-visible")}function xs_show_hide_multiple_div(e,t){event.preventDefault();var a=document.querySelectorAll(e);if(a)for(var r=0;r<a.length;r++)a[r].classList.remove("xs-donate-visible");var o=document.querySelector(t);o&&o.classList.toggle("xs-donate-visible")}function wfp_fixed_header(){document.querySelector("#wfp_menu_fixed").offsetTop;window.pageYOffset}function wfp_select_pledge(e,t){var a=jQuery("#"+e.id);a&&(a.removeClass("hover-effect-enable"),a.addClass("select-reward"))}function submit_pledge_amount(e){var t=jQuery(e),a=t.data("form-id"),r=t.data("pledge_id"),o=t.data("pledge_amt"),n=t.data("gateway"),i=t.data("wfp-index");if("woocommerce"==n){handle_add_to_cart_for_woocommerce_payment(a,o,"reward",{pledge_id:r,pledge_uid:a+"_"+r})}else{var d=t.data("checkout_url"),s="&amount="+o+"&target="+a+"&pledge="+o+"&type=pledge&index="+i+"&pledge_uid="+r;setTimeout((function(){window.location.href=d+s}),1e3)}}function set_pleadge_amount_data(e){if(e){var t=e.getAttribute("wfp-index"),a=e.getAttribute("wfp-id"),r=e.getAttribute("wfp-pledge"),o=e.getAttribute("data-pledge_id"),n=document.querySelector("#pledge_section__"+a);if(n){var i=n.querySelector("#wfp-pledge-block__"+t);if(i){var d=0;if(r&&(d=Number(r)),d<=0)return!1;var s="",u=i.querySelector("#xs_donate_country_pledge");u&&(s=u.value);var c=document.querySelector("#post-"+a);if(c){var l=c.getAttribute("wfp-data-url"),f=c.getAttribute("wfp-payment-type");if(l&&d>0){var p="&amount="+d+"&target="+a+"&pledge="+r+"&country="+s+"&type=pledge&index="+t+"&pledge_uid="+o,_=a+"_"+o,m=e.getAttribute("data-checkout_url");if(console.log(_,m),"woocommerce"==f){handle_add_to_cart_for_woocommerce_payment(a,d,"crowdfunding",{pledge_id:o,pledge_uid:_})}else setTimeout((function(){window.location.href=l+p}),1e3)}}}}}else alert("Invalid Rewards")}function set_pleadge_amount_data_fixed(e){if(e){e.disabled=!0;var t=e.getAttribute("wfp-id"),a=e.getAttribute("wfp-pledge"),r=document.querySelector("#post-"+t);if(r){var o=0,n=r.querySelector("#xs_donate_amount_pledge_fixed");n&&(o=Number(n.value),n.removeAttribute("style"));var i=r.getAttribute("wfp-data-url"),d=jQuery(e).data("min")?jQuery(e).data("min"):0,s=jQuery(e).data("max")?jQuery(e).data("max"):0,u=[];if(o<d||o>s&&0!=s)return e.disabled=!1,u.push(o<d&&"minimum donate amount: "+d),u.push(o>s&&0!=s&&" maximum donate amount: "+s),jQuery(n).parents(".wfp-additional-data").after('<div class="wfp-error error xs-alert xs-alert-danger">Sorry! '+u.filter(Boolean).join(" & ")+"</div>"),setTimeout((function(){jQuery(n).parents(".wfp-total-backers-count").find(".wfp-error").fadeOut()}),1e3),!1;var c=r.getAttribute("wfp-payment-type");if(i)if(o>0){var l="&amount="+o+"&target="+t+"&pledge="+a+"&country=0&type=fixed&index=";if("woocommerce"==c){var f={id:t,price:o,quantity:1,type:"crowdfunding"};jQuery.ajax({data:f,type:"post",url:window.xs_donate_url.resturl+"woc-redirect/add-to-cart/",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",xs_donate_url.nonce)},success:function(e){document.querySelector("#add_cart_"+t).submit()},error:function(t){e.disabled=!1,alert("Add to cart failed!")}})}else setTimeout((function(){window.location.href=i+l}),1e3)}else e.disabled=!1,n.setAttribute("style","border-color: red;")}}}jQuery((function(e){e(".xs_donate_switch_button").on("change",(function(){const t=e(this).is(":checked"),a=e(this).closest(".wfp-donate-form-footer").find(".submit-btn");t?a.attr("disabled",!1):a.attr("disabled",!0)}))})),jQuery(document).ready((function(e){jQuery(".wfdp-donationForm").submit((function(e){e.preventDefault(),console.log("trace -- 1");let t=jQuery(this);var a=t.serialize(),r=this.id,o=r.split("-"),n=o[o.length-1],i=t.data("wfp-id");let d=get_payment_type(t);console.log("payment gateway type :: ",d);var s=jQuery("#"+r+" #xs-donate-terms-condition");if(s&&0==s.prop("checked"))return void jQuery("#"+r+" .wfdp-donation-message").last().html('<div class="xs-alert xs-alert-danger error"> Please select terms & condition.</div>');if(document.getElementsByTagName("body")[0].classList.add("wfp-disabled"),"woocommerce"===d){this.getAttribute("wfp-data-url");var u=this.querySelector("#xs_donate_amount").value,c=this.querySelector("#xs_donate_amount_total_hidden");return c&&(u=c.value),console.log("the culprit -- ",i),handle_add_to_cart_for_woocommerce_payment(i,u,"donation"),!0}jQuery.ajax({data:a,type:"post",url:window.xs_donate_url.resturl+"xs-donate-form/donate-submit/"+n,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",xs_donate_url.nonce)},success:function(e){if(e.error.length>0)return document.getElementsByTagName("body")[0].classList.remove("wfp-disabled"),void jQuery("#"+r+" .wfdp-donation-message").html('<div class="error xs-alert xs-alert-danger">'+e.error+"</div>");if(e.success.message.length>0){var t=e.success;if(jQuery("input, textarea, select").each((function(){jQuery(this).val("")})),"online_payment"==t.type)document.getElementsByTagName("body")[0].classList.remove("wfp-disabled"),jQuery("#"+r+" .wfdp-donation-message").html('<div class="success xs-alert xs-alert-success">Please wait... Redirecting paypal payment page.</div>'),setTimeout((function(){window.location.href=t.url}),1500);else if("stripe_payment"==t.type){document.getElementsByTagName("body")[0].classList.remove("wfp-disabled"),jQuery("#"+r+" .wfdp-donation-message").html('<div class="success xs-alert xs-alert-success">Please wait... Open Stripe PopUp Box.</div>'),setTimeout((function(){jQuery("#"+r+" .wfdp-donation-message").hide()}),1500);var a=StripeCheckout.configure({key:t.keys,image:t.image_url,locale:"auto",token:function(e){if(e.id){t.stripe_token=e.id;var a={action:"wfp-stripe-payment",token:e.id,entry_id:t.entry_id,form_id:t.form_id,sandbox:t.sandbox,nonce:donation_form_ajax.nonce};jQuery.ajax({data:a,type:"post",url:window.xs_donate_url.resturl+"wfp-stripe-payment/stripe-submit/"+t.entry_id,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",xs_donate_url.nonce)},success:function(a){a.status?"success"==a.status?window.location.href=t.return_url+"&stripe="+e.id:window.location.href=t.cancel_return+"&stripe="+e.id:alert(a)}})}else window.location.href=t.cancel_return}});a.open({name:String(t.name_post),description:" Campaign No.: "+String(t.description),amount:100*Number(t.amount),currency:t.currency_code}),window.addEventListener("popstate",(function(){a.close()}))}else jQuery("#"+r+" .wfdp-donation-message").html('<div class="success xs-alert xs-alert-success">Please wait... Redirecting Order Page.</div>'),setTimeout((function(){window.location.href=t.order_page}),500)}else;}})}))})),window.onscroll=function(){},jQuery(document).ready((function(){var e=jQuery(".wfp-tab > li"),t=jQuery(".wfp-tab-content");function a(){setTimeout((function(){var e=window.location.hash.substr(1);e&&(jQuery(".wfp-tab > li").removeClass("active"),jQuery('.wfp-tab > li > a[href="#'+e+'"]').parent().addClass("active"),jQuery(".wfp-tab-content").removeClass("active"),jQuery(".wfp-tab-content#"+e).addClass("active"))}),15)}e&&(e.first().addClass("active"),t&&t.first().addClass("active")),a(),jQuery('.wfp-tab > li > a[href*="#"]').on("click",(function(e){a()}))})),jQuery(document).ready((function(e){jQuery(".wfp-select2-country").length&&jQuery(".wfp-select2-country").select2(),e(".datepicker-fundrasing").each((function(){var t=e(this).parent(".search-tab"),a=e(this).parent(".search-tab").hasClass("wfp-no-date-limit"),r={appendTo:t.get(0),dateFormat:"Y-m-d"};a||(r.maxDate="today"),e(this).flatpickr(r)}))}));